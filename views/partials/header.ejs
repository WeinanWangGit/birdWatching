<link rel="stylesheet" href="/stylesheets/header.css" />
<%- include('head') %>

<header>
  <div class="title">
     <h1 id="title">Bird Sighting</h1>
  </div>
  <div class="nav">
    <div class="add-button">
      <button class="btn btn-primary" onclick="handleButtonClick()">
        <i class="fa fa-plus-circle"></i> Add New Sighting
      </button>
    </div>
  </div>
  <!-- Add a modal container -->
  <%- include('../../public/page/create_offline.html') %>
</header>
<script>

  const titleElement = document.getElementById('title');

  // Add the click event listener to the h1 element
  titleElement.addEventListener('click', () => {

    if (!navigator.onLine) {
       window.location.href = '/page/index_offline.html'

    } else {
       window.location.href = '/';
    }


  });

  // Function to handle the button click event
  function handleButtonClick() {
    if (!navigator.onLine) {
      // If the browser is offline, display the offline modal window
      var offlineModal = document.getElementById('offlineModal');
      offlineModal.style.display = 'block';

    } else {
      // If the browser is online, redirect to the "/create" page
      window.location.href = '/create';
    }
  }




  document.addEventListener('DOMContentLoaded', function() {
    /**
     * When the client gets off-line, it shows an off line warning to the user
     * so that it is clear that the data is stale
     */
    window.addEventListener('offline', function(e) {
      // Queue up events for server.
      console.log("You are offline");
    }, false);



    window.addEventListener('online', async function(e) {
      // Resync data with the server.
      console.log("You are online");
    }, false);


  });


</script>
